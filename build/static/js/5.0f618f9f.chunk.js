(this.webpackJsonpolympic=this.webpackJsonpolympic||[]).push([[5,12],{24:function(e,t,n){"use strict";n.r(t);var a=n(49),c=n(39),o=n(0),i=n.n(o),r=n(5),s=n(63),u=n(40),l=n(42),m=n(38),b=n.n(m),f=0,j=1,d=2,v=3,O=4,E=5,p=6;t.default=function(){var e,t=Object(s.a)(),n=Object(c.a)(t,2),m=n[0],k=m.moveCounter,h=m.permissionGranted,B=n[1],g=B.setMoveCounter,S=B.setPermissionGranted,_=Object(o.useState)(f),N=Object(c.a)(_,2),y=N[0],C=N[1],G=Object(o.useState)(0),w=Object(c.a)(G,2),R=w[0],M=w[1],H=Object(o.useState)(0),I=Object(c.a)(H,2),D=I[0],J=I[1],L=Object(o.useState)(!1),P=Object(c.a)(L,2),q=P[0],x=P[1],Q=Object(r.i)("playerId"),z=Object(o.useRef)(null),W=function(){h||("function"===typeof DeviceOrientationEvent&&"function"===typeof DeviceOrientationEvent.requestPermission?DeviceOrientationEvent.requestPermission().then((function(e){"granted"==e&&S(!0)})).catch(console.error):S(!0))};Object(o.useEffect)((function(){h&&(z.current=Object(u.a)({host:l.a.socketioHost,eventEmitters:[{emitter:"joinRoom",data:Q,ack:function(e){"failed, scan again"===e&&alert("Room not found, please Scan the QRcode again.")}}],eventListeners:[{listener:"gameStage",callback:function(e){C(e),e===d&&M(0)}},{listener:"gameResult",callback:function(e){J(e)}},{listener:"playersInfo",callback:function(e){e.forEach((function(e){e.playerId===Q.playerId&&x(e.joined)}))}},{listener:"gameChoice",callback:function(e){M(e)}},{listener:"gameSelected",callback:function(e){M(e)}}]}))}),[h]),Object(o.useEffect)((function(){k>2&&(A(),g(0))}),[k]);var A=function(){z.current.emit("shake")},F=function(e){z.current.emit("selectGame",e,(function(e){M(e)}))};return i.a.createElement("div",{className:b.a.wrapper},(e={},Object(a.a)(e,f,i.a.createElement("button",{className:b.a.joinButton,onClick:W},"Join Game!")),Object(a.a)(e,j,q?i.a.createElement("div",{className:b.a.joinButton},"Wait for other players"):i.a.createElement("button",{className:b.a.joinButton,onClick:W},"Join Game!")),Object(a.a)(e,d,i.a.createElement("div",{className:b.a.joinButton},i.a.createElement("button",{onClick:function(){return F(0)},className:b.a.selectButton+(0===R?" "+b.a.selected:"")},"Game 1"),i.a.createElement("br",null),i.a.createElement("button",{onClick:function(){return F(1)},className:b.a.selectButton+(1===R?" "+b.a.selected:"")},"Game 2"),i.a.createElement("br",null),i.a.createElement("button",{onClick:function(){return F(2)},className:b.a.selectButton+(2===R?" "+b.a.selected:"")},"Game 3"))),Object(a.a)(e,v,i.a.createElement("div",{className:b.a.joinButton},"Game ",R+1)),Object(a.a)(e,O,i.a.createElement("div",{className:b.a.joinButton},"Ready")),Object(a.a)(e,E,i.a.createElement("button",{className:b.a.joinButton,onClick:A},"Shake!")),Object(a.a)(e,p,i.a.createElement("div",{className:b.a.joinButton},"Result",i.a.createElement("div",null,i.a.createElement("b",null,D)))),e)[y])}},38:function(e,t,n){e.exports={wrapper:"mobileHome_wrapper__2dkv9",joinButton:"mobileHome_joinButton__2dv24",selectButton:"mobileHome_selectButton__13aoe",selected:"mobileHome_selected__2QI_z"}},40:function(e,t,n){"use strict";var a=n(53),c=n.n(a);t.a=function(e){var t=e.host,n=e.eventListeners,a=e.eventEmitters,o=c()(t,{secure:!1});return o.on("connect",(function(){console.log("connected !"),a.forEach((function(e){var t="function"===typeof e.ack?e.ack:null;o.emit(e.emitter,e.data,t)}))})),n.forEach((function(e){o.on(e.listener,e.callback)})),o}},42:function(e,t,n){"use strict";t.a={socketioHost:"shakeshakegame.heroku.com"}},56:function(e,t){},63:function(e,t,n){"use strict";var a=n(39),c=n(0);t.a=function(){var e=Object(c.useState)(!1),t=Object(a.a)(e,2),n=t[0],o=t[1],i=Object(c.useState)(0),r=Object(a.a)(i,2),s=r[0],u=r[1],l=Object(c.useState)(0),m=Object(a.a)(l,2),b=m[0],f=m[1],j=Object(c.useState)(0),d=Object(a.a)(j,2),v=d[0],O=d[1],E=Object(c.useState)(0),p=Object(a.a)(E,2),k=p[0],h=p[1],B=Object(c.useRef)(0),g=Object(c.useRef)(0);Object(c.useEffect)((function(){return n&&window.addEventListener("deviceorientation",_,!1),function(){window.removeEventListener("deviceorientation",_,!1)}}),[n]);var S=[null,null,null],_=function(e){var t=e.alpha,n=e.beta,a=e.gamma,c=Date.now(),o=c-g.current,i=t,r=i-B.current;if(g.current=c,B.current=i,O(i),u(Math.sign(r)),f(r/o*1e3),t&&n&&a){var s=Math.abs(t-S[0]),l=Math.abs(n-S[1]),m=Math.abs(a-S[2]);h(s+l+m>45?function(e){return e+1}:function(e){return Math.max(0,e-1)}),S=[t,n,a]}};return[{direction:s,speed:b,angle:v,moveCounter:k,permissionGranted:n},{setPermissionGranted:o,setMoveCounter:h}]}}}]);
//# sourceMappingURL=5.0f618f9f.chunk.js.map