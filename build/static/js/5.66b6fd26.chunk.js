(this.webpackJsonpolympic=this.webpackJsonpolympic||[]).push([[5,12],{26:function(e,t,n){"use strict";n.r(t);var a=n(49),c=n(42),o=n(0),i=n.n(o),r=n(5),s=function(){var e=Object(o.useState)(!1),t=Object(c.a)(e,2),n=t[0],a=t[1],i=Object(o.useState)(0),r=Object(c.a)(i,2),s=r[0],u=r[1];Object(o.useEffect)((function(){return n&&window.addEventListener("devicemotion",b,!1),function(){window.removeEventListener("devicemotion",b,!1)}}),[n]);var l=[null,null,null],m=Object(o.useRef)(0),b=function(e){var t=e.acceleration,n=t.x,a=t.y,c=t.z,o=Date.now(),i=o-m.current;m.current=o;Math.abs(n-l[0]);var r=Math.abs(a-l[1]);Math.abs(c-l[2]);u(r/i>.5?function(e){return e+1}:function(e){return Math.max(0,e-1)}),l=[n,a,c]};return[{moveCounter:s,permissionGranted:n},{setPermissionGranted:a,setMoveCounter:u}]},u=n(39),l=n(41),m=n(38),b=n.n(m),f=0,j=1,v=2,d=3,O=4,E=5,p=6,k=7;t.default=function(){var e,t=s(),n=Object(c.a)(t,2),m=n[0],h=m.moveCounter,B=m.permissionGranted,N=n[1],_=N.setMoveCounter,y=N.setPermissionGranted,C=Object(o.useState)(f),G=Object(c.a)(C,2),w=G[0],S=G[1],g=Object(o.useState)(0),H=Object(c.a)(g,2),M=H[0],R=H[1],I=Object(o.useState)(0),D=Object(c.a)(I,2),J=D[0],L=D[1],P=Object(o.useState)(""),x=Object(c.a)(P,2),q=x[0],z=x[1],Q=Object(o.useState)(!1),W=Object(c.a)(Q,2),A=W[0],F=W[1],K=Object(r.i)("playerId"),T=Object(o.useRef)(null),U=function(){B||("function"===typeof DeviceOrientationEvent&&"function"===typeof DeviceOrientationEvent.requestPermission?DeviceOrientationEvent.requestPermission().then((function(e){"granted"==e&&y(!0)})).catch(console.error):y(!0))};Object(o.useEffect)((function(){B&&(T.current=Object(u.a)({host:l.a.socketioHost,eventEmitters:[{emitter:"joinRoom",data:K,ack:function(e){"joined"!==e&&(S(k),z(e))}}],eventListeners:[{listener:"gameStage",callback:function(e){S(e),e===v?R(0):e===p&&T.current.disconnect()}},{listener:"gameResult",callback:function(e){L(e)}},{listener:"playersInfo",callback:function(e){e.forEach((function(e){e.playerId===K.playerId&&F(e.joined)}))}},{listener:"gameChoice",callback:function(e){R(e)}},{listener:"gameSelected",callback:function(e){R(e)}}]}))}),[B]),Object(o.useEffect)((function(){h>2&&(V(),_(0))}),[h]);var V=function(){T.current.emit("shake")},X=function(e){T.current.emit("selectGame",e,(function(e){R(e)}))};return i.a.createElement("div",{className:b.a.wrapper},(e={},Object(a.a)(e,f,i.a.createElement("button",{className:b.a.joinButton,onClick:U},"Join Game!")),Object(a.a)(e,j,A?i.a.createElement("div",{className:b.a.joinButton},"Wait for other players"):i.a.createElement("button",{className:b.a.joinButton,onClick:U},"Join Game!")),Object(a.a)(e,v,i.a.createElement("div",{className:b.a.joinButton},i.a.createElement("button",{onClick:function(){return X(0)},className:b.a.selectButton+(0===M?" "+b.a.selected:"")},"Game 1"),i.a.createElement("br",null),i.a.createElement("button",{onClick:function(){return X(1)},className:b.a.selectButton+(1===M?" "+b.a.selected:"")},"Game 2"),i.a.createElement("br",null),i.a.createElement("button",{onClick:function(){return X(2)},className:b.a.selectButton+(2===M?" "+b.a.selected:"")},"Game 3"))),Object(a.a)(e,d,i.a.createElement("div",{className:b.a.joinButton},"Game ",M+1)),Object(a.a)(e,O,i.a.createElement("div",{className:b.a.joinButton},"Ready")),Object(a.a)(e,E,i.a.createElement("button",{className:b.a.joinButton,onClick:V},"Shake!")),Object(a.a)(e,p,i.a.createElement("div",{className:b.a.joinButton},"Result",i.a.createElement("div",null,J))),Object(a.a)(e,k,i.a.createElement("div",{className:b.a.joinButton},i.a.createElement("div",null,q))),e)[w])}},38:function(e,t,n){e.exports={wrapper:"mobileHome_wrapper__2dkv9",joinButton:"mobileHome_joinButton__2dv24",selectButton:"mobileHome_selectButton__13aoe",selected:"mobileHome_selected__2QI_z"}},39:function(e,t,n){"use strict";var a=n(53),c=n.n(a);t.a=function(e){var t=e.host,n=e.eventListeners,a=e.eventEmitters,o=c()(t,{secure:!1});return o.on("connect",(function(){console.log("connected !"),a.forEach((function(e){var t="function"===typeof e.ack?e.ack:null;o.emit(e.emitter,e.data,t)}))})),n.forEach((function(e){o.on(e.listener,e.callback)})),o}},41:function(e,t,n){"use strict";t.a={socketioHost:"shakeshakegame.herokuapp.com"}},56:function(e,t){}}]);
//# sourceMappingURL=5.66b6fd26.chunk.js.map